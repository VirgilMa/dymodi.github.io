--- 
layout: post
title: Beacon数据压力
date: Nov. 6, 2017
author: Yi DING
---

[comment]: # (统计并预估Beacon的数据压力)

### Quick Statistics
* 当前已部署的商户数量：200
* 当前日均beacon原始数据量：20万条
* 原始数据小时峰值：4万条
* 原始数据分钟峰值：2千条
* 原始数据秒峰值：90条
* 千里眼日新增数据量：20万条
* 千里眼新增数据量秒峰值：22条

### 第三期估计
从Beacon部署的店铺规模，第三期是第二期的(15,000/200) = 75 倍，则预估数据如下：
* 预计部署的商户数量：200*75 = 15,000
* 预计日均原始beacon数据量：20万*75 = 1千500万（15,000,000）
* 预计原始数据小时峰值：4万*75 = 300万条
* 预计原始数据分钟峰值：2千*75 = 15万条
* 预计原始数据秒峰值：90*75 = 6750条
* 预计千里眼日新增数据量：20万*75 = 1千500万（15,000,000）
* 预计千里眼新增数据量秒峰值：22*75 = 1650条


### 详表
表一：智石数据统计

|Date   |# Beacon Raw Data  |# Rider    |# Shop | # Per Rider   |# Per Shop |# Per Rider Per Shop   |
|---    |---                |---        |---    |---            |---        |---                    |
|10-30  |258317             |338        |195    |764            |1325       |3.9                    |
|10-31  |264715             |330        |194    |802            |1365       |4.1                    |
|11-01  |242846             |323        |207    |752            |1173       |3.6                    |
|11-02  |258631             |330        |202    |784            |1280       |3.9                    |
|11-03  |240906             |330        |189    |730            |1275       |3.9                    |
|11-04  |229283             |329        |197    |697            |1164       |3.5                    |       
|11-05  |264371             |302        |210    |875            |1259       |4.2                    |

表二：睿石数据统计

|Date   |# Beacon Raw Data  |# Rider    |# Shop | # Per Rider   |# Per Shop |# Per Rider Per Shop   |
|---    |---                |---        |---    |---            |---        |---                    |
|10-30  |185426             |323        |166    |574            |1117       |3.5                    |
|10-31  |190935             |317        |166    |602            |1150       |3.6                    |
|11-01  |175553             |313        |175    |561            |1003       |3.2                    |
|11-02  |179930             |320        |169    |562            |1065       |3.3                    |
|11-03  |177267             |305        |160    |581            |1108       |3.6                    |
|11-04  |165081             |316        |165    |522            |1000       |3.2                    |
|11-05  |199530             |298        |171    |670            |1167       |3.9                    |


表三：原始数据峰值估计

|Date   |# Max per Hour |# Max per Minute   |# Max per Second   |
|---    |---            |---                |---                |
|10-30  |39634          |1528               |59                 |
|10-31  |31119          |2045               |84                 |
|11-01  |40404          |1250               |59                 |
|11-02  |32924          |1323               |56                 |
|11-03  |33234          |998                |62                 |
|11-04  |32215          |936                |46                 |
|11-05  |36832          |1150               |56                 |

表四：千里眼新增数据统计

|Date   |# Additional Data  |# Rider    |# Per Rider    |
|---    |---                |---        |---            |
|10-30  |201304             |330        |610            |
|10-31  |197373             |327        |604            |
|11-01  |187869             |318        |591            |
|11-02  |202549             |328        |618            |
|11-03  |189872             |316        |601            |
|11-04  |188676             |326        |579            |
|11-05  |195955             |303        |647            |



### 附注
1. 现在每天beacon的原始数据量大于上面的统计，是因为现在版本还没有卡UUID，也就是说除了公司beacon的UUID"E2C56DB5-DFFB-48D2-B060-D0F5A71096E0" 之外还有别的UUID收上来，这需要在后续版本进行改进。
